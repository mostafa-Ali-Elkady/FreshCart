"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[143],{7143:(I,m,s)=>{s.r(m),s.d(m,{LoginComponent:()=>A});var p=s(6895),l=s(433),_=s(9427),n=s(1571),c=s(4377);function f(o,r){if(1&o&&(n.TgZ(0,"div",14)(1,"p",15),n._uU(2),n.qZA()()),2&o){const t=n.oxw();n.xp6(2),n.Oqu(t.apiError)}}function h(o,r){1&o&&(n.TgZ(0,"p",18),n._uU(1," Email is required "),n.qZA())}function v(o,r){1&o&&(n.TgZ(0,"p",18),n._uU(1," Email is inValid "),n.qZA())}function Z(o,r){if(1&o&&(n.TgZ(0,"div",16),n.YNc(1,h,2,0,"p",17),n.YNc(2,v,2,0,"p",17),n.qZA()),2&o){const t=n.oxw();let e,i;n.xp6(1),n.Q6J("ngIf",null==(e=t.loginForm.get("email"))?null:e.getError("required")),n.xp6(1),n.Q6J("ngIf",null==(i=t.loginForm.get("email"))?null:i.getError("email"))}}function T(o,r){1&o&&(n.TgZ(0,"p",18),n._uU(1," Password is required "),n.qZA())}function L(o,r){1&o&&(n.TgZ(0,"p",18),n._uU(1," must be "),n._UZ(2,"br"),n._uU(3," * Start with a letter (either uppercase or lowercase). "),n._UZ(4,"br"),n._uU(5," * Be between 6 and 15 characters in total. "),n._UZ(6,"br"),n._uU(7," * Can only contain letters (A-Z or a-z) and numbers (0-9) "),n.qZA())}function C(o,r){if(1&o&&(n.TgZ(0,"div",16),n.YNc(1,T,2,0,"p",17),n.YNc(2,L,8,0,"p",17),n.qZA()),2&o){const t=n.oxw();let e,i;n.xp6(1),n.Q6J("ngIf",null==(e=t.loginForm.get("password"))?null:e.getError("required")),n.xp6(1),n.Q6J("ngIf",null==(i=t.loginForm.get("password"))?null:i.getError("pattern"))}}function E(o,r){1&o&&n._UZ(0,"i",19)}function w(o,r){1&o&&(n.TgZ(0,"span"),n._uU(1,"Login"),n.qZA())}const d=function(o,r){return{"is-invalid":o,"is-valid":r}};let A=(()=>{class o{constructor(t,e){this._AuthService=t,this._Router=e,this.isLoading=!1,this.apiError=null,this.username="",this.loginForm=new l.cw({email:new l.NI(null,[l.kI.required,l.kI.email]),password:new l.NI(null,[l.kI.required,l.kI.pattern(/^[A-Za-z0-9]{6,15}$/)])}),null!==localStorage.getItem("userToken")&&e.navigate(["/home"])}handleLogin(t){this.isLoading=!0,t.valid&&this._AuthService.login(t.value).subscribe({next:e=>{"success"===e.message&&(this.isLoading=!1,this._Router.navigate(["/home"]),localStorage.setItem("userToken",e.token),this._AuthService.decodeUserData())},error:e=>{this.isLoading=!1,this.apiError=e.error.message}})}clearApiError(){this.apiError=null}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(c.e),n.Y36(_.F0))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-login"]],standalone:!0,features:[n.jDz],decls:20,vars:15,consts:[[1,"mx-auto","my-5","form-login","bg-color","txt",3,"formGroup","ngSubmit"],[1,"title"],["class","alert alert-danger",4,"ngIf"],["for","email",1,"fw-bold","txt-color"],["type","text","id","email","placeholder","Email","formControlName","email",1,"form-control","my-2",3,"ngClass","input"],["class","alert alert-danger p-1",4,"ngIf"],["for","password",1,"fw-bold","txt-color"],["type","password","id","password","placeholder","password","formControlName","password",1,"form-control","my-2",3,"ngClass","input"],[1,"d-flex","justify-content-center","align-items-center","pt-2","flex-column"],[1,"signup","fs-6","txt-grey"],["routerLink","/signup",1,"text-main"],["type","submit",1,"btn","bg-main","text-white",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"m-0","p-0","text-danger"],[1,"alert","alert-danger","p-1"],["class","m-0 text-danger",4,"ngIf"],[1,"m-0","text-danger"],[1,"fa","fa-spinner","fa-spin"]],template:function(t,e){if(1&t&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return e.handleLogin(e.loginForm)}),n.TgZ(1,"h3",1),n._uU(2,"Login"),n.qZA(),n.YNc(3,f,3,1,"div",2),n.TgZ(4,"label",3),n._uU(5,"Email:"),n.qZA(),n.TgZ(6,"input",4),n.NdJ("input",function(){return e.clearApiError()}),n.qZA(),n.YNc(7,Z,3,2,"div",5),n.TgZ(8,"label",6),n._uU(9,"password:"),n.qZA(),n.TgZ(10,"input",7),n.NdJ("input",function(){return e.clearApiError()}),n.qZA(),n.YNc(11,C,3,2,"div",5),n.TgZ(12,"div",8)(13,"p",9),n._uU(14," Don't have an account? "),n.TgZ(15,"a",10),n._uU(16,"Sign up"),n.qZA()(),n.TgZ(17,"button",11),n.YNc(18,E,1,0,"i",12),n.YNc(19,w,2,0,"span",13),n.qZA()()()),2&t){let i,g,a,u;n.Q6J("formGroup",e.loginForm),n.xp6(3),n.Q6J("ngIf",e.apiError),n.xp6(3),n.Q6J("ngClass",n.WLB(9,d,(null==(i=e.loginForm.get("email"))?null:i.invalid)&&(null==(i=e.loginForm.get("email"))?null:i.touched),(null==(i=e.loginForm.get("email"))?null:i.valid)&&(null==(i=e.loginForm.get("email"))?null:i.touched))),n.xp6(1),n.Q6J("ngIf",(null==(g=e.loginForm.get("email"))?null:g.errors)&&(null==(g=e.loginForm.get("email"))?null:g.touched)),n.xp6(3),n.Q6J("ngClass",n.WLB(12,d,(null==(a=e.loginForm.get("password"))?null:a.invalid)&&(null==(a=e.loginForm.get("password"))?null:a.touched),(null==(a=e.loginForm.get("password"))?null:a.valid)&&(null==(a=e.loginForm.get("password"))?null:a.touched))),n.xp6(1),n.Q6J("ngIf",(null==(u=e.loginForm.get("password"))?null:u.errors)&&(null==(u=e.loginForm.get("password"))?null:u.touched)),n.xp6(6),n.Q6J("disabled",e.loginForm.invalid),n.xp6(1),n.Q6J("ngIf",e.isLoading),n.xp6(1),n.Q6J("ngIf",!e.isLoading)}},dependencies:[p.ez,p.mk,p.O5,l.UX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,_.rH],styles:["form[_ngcontent-%COMP%]{width:min(900px,100%);border-radius:.75rem;padding:2rem}.title[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;line-height:2rem;font-weight:700;color:var(--txt)}.form-control[_ngcontent-%COMP%]{width:100%;border-radius:.375rem;border:1px solid rgba(55,65,81,1);outline:0;background-color:var(--bg);padding:.75rem 1rem;color:var(--txt)}"]}),o})()}}]);